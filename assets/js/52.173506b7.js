(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{482:function(t,e,v){t.exports=v.p+"assets/img/replace.6929333c.png"},483:function(t,e,v){t.exports=v.p+"assets/img/debug.4f3d7c16.png"},605:function(t,e,v){"use strict";v.r(e);var _=v(10),l=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"opencore调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#opencore调试"}},[t._v("#")]),t._v(" OpenCore调试")]),t._v(" "),e("p",[t._v("需要弄清楚为什么你会遇到问题或停滞不前?嗯，你来对地方了:")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#文件交换"}},[t._v("文件交换")])]),e("li",[e("a",{attrs:{href:"#配置更改"}},[t._v("配置更改")]),e("ul",[e("li",[e("a",{attrs:{href:"#misc-debug"}},[t._v("Misc > Debug")])])])]),e("li",[e("a",{attrs:{href:"#禁用所有的日志"}},[t._v("禁用所有的日志")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"文件交换"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件交换"}},[t._v("#")]),t._v(" 文件交换")]),t._v(" "),e("p",[t._v("首先，确保你使用的是"),e("code",[t._v("DEBUG")]),t._v("或"),e("code",[t._v("NOOPT")]),t._v("版本的OpenCore。这将提供比"),e("code",[t._v("RELEASE")]),t._v("版本更多的信息，需要交换的特定文件:")]),t._v(" "),e("ul",[e("li",[t._v("EFI/BOOT/\n"),e("ul",[e("li",[e("code",[t._v("BOOTx64.efi")])])])]),t._v(" "),e("li",[t._v("EFI/OC/Drivers/\n"),e("ul",[e("li",[e("code",[t._v("OpenRuntime.efi")])]),t._v(" "),e("li",[e("code",[t._v("OpenCanopy.efi")]),t._v("(如果你正在使用它)")])])]),t._v(" "),e("li",[t._v("EFI/OC/\n"),e("ul",[e("li",[e("code",[t._v("OpenCore.efi")])])])])]),t._v(" "),e("p",[e("img",{attrs:{src:v(482),alt:""}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("注意")]),t._v(":通常最好调试没有OpenCanopy的系统，如果需要，确保这个文件来自debug，否则几乎没有调试信息。")])]),t._v(" "),e("h2",{attrs:{id:"配置更改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置更改"}},[t._v("#")]),t._v(" 配置更改")]),t._v(" "),e("p",[t._v("接下来，转到你的config plist并找到"),e("code",[t._v("Misc")]),t._v(" > "),e("code",[t._v("Debug")]),t._v("部分，我们有几个条目需要使用:")]),t._v(" "),e("h3",{attrs:{id:"misc-debug"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#misc-debug"}},[t._v("#")]),t._v(" Misc > Debug")]),t._v(" "),e("p",[t._v("这里我们需要启用以下功能:")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("AppleDebug")]),t._v(": 是")]),t._v(" "),e("ul",[e("li",[t._v("提供更多调试信息，特别是与 boot.efi 相关的信息，并将日志存储到磁盘。")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("ApplePanic")]),t._v(": 是")]),t._v(" "),e("ul",[e("li",[t._v("这将允许内核错误被存储到磁盘，强烈建议在boot-args中保持"),e("code",[t._v("keepsyms=1")]),t._v("以尽可能多地保存信息。")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("DisableWatchdog")]),t._v(": 是")]),t._v(" "),e("ul",[e("li",[t._v("禁用UEFI看门狗，用于OpenCore在一些非关键的东西上停滞。")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Target")]),t._v(": "),e("code",[t._v("67")]),t._v(" (或者在下面计算一个)")]),t._v(" "),e("ul",[e("li",[t._v("用于开启不同级别的调试")])])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x01")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用日志记录")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x02")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用屏幕调试")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x04")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用记录到数据中心")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x08")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用串口日志功能.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x10")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用UEFI变量日志记录.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x20")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用非易失性UEFI变量日志记录.")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x40")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用文件记录功能.")])])])]),t._v(" "),e("p",[t._v("要计算目标，可以使用十六进制计算器，然后将其转换为小数。对于我们来说，我们希望将我们的值存储到一个.txt文件中，以便以后查看:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("0x01")]),t._v(" — 启用日志记录")]),t._v(" "),e("li",[e("code",[t._v("0x02")]),t._v(" — 启用屏幕调试\n"),e("ul",[e("li",[t._v("请注意，对于GOP实现不佳的固件，这可能会严重增加启动时间")])])]),t._v(" "),e("li",[e("code",[t._v("0x40")]),t._v(" — 将日志写入文件")])]),t._v(" "),e("p",[e("code",[t._v("0x01")]),t._v(" + "),e("code",[t._v("0x02")]),t._v(" + "),e("code",[t._v("0x40")]),t._v(" = "),e("code",[t._v("0x43")])]),t._v(" "),e("p",[e("code",[t._v("0x43")]),t._v(" 转换成小数后变成 "),e("code",[t._v("67")])]),t._v(" "),e("p",[t._v("我们可以设置 "),e("code",[t._v("Misc")]),t._v(" -> "),e("code",[t._v("Debug")]),t._v(" -> "),e("code",[t._v("Target")]),t._v(" -> "),e("code",[t._v("67")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("DisplayLevel")]),t._v(": "),e("code",[t._v("2147483714")]),t._v(" (或者在下面计算一个)\n"),e("ul",[e("li",[t._v("用于设置记录的内容")])])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x00000002")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在DEBUG, NOOPT, RELEASE中发出警告")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x00000040")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("DEBUG, NOOPT 中的调试信息。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x00400000")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("自定义构建中的调试详细信息。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0x80000000")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在DEBUG, NOOPT, RELEASE中出现的错误。")])])])]),t._v(" "),e("p",[t._v("完整的列表可以在 "),e("a",{attrs:{href:"https://github.com/tianocore/edk2/blob/UDK2018/MdePkg/Include/Library/DebugLib.h",target:"_blank",rel:"noopener noreferrer"}},[t._v("DebugLib.h"),e("OutboundLink")],1),t._v("中找到。")]),t._v(" "),e("p",[t._v("对于我们来说，我们只需要以下内容:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("0x00000002")]),t._v(" — 在DEBUG, NOOPT, RELEASE中发出警告")]),t._v(" "),e("li",[e("code",[t._v("0x00000040")]),t._v(" — DEBUG, NOOPT 中的调试信息。")]),t._v(" "),e("li",[e("code",[t._v("0x80000000")]),t._v(" — 在DEBUG, NOOPT, RELEASE中出现的错误。")])]),t._v(" "),e("p",[t._v("就像"),e("code",[t._v("Target")]),t._v("一样，我们使用十六进制计算器，然后转换为十进制:")]),t._v(" "),e("p",[e("code",[t._v("0x80000042")]),t._v(" 转换为小数变成 "),e("code",[t._v("2147483714")])]),t._v(" "),e("p",[e("code",[t._v("Misc")]),t._v(" -> "),e("code",[t._v("Debug")]),t._v(" -> "),e("code",[t._v("DisplayLevel")]),t._v(" -> "),e("code",[t._v("2147483714")])]),t._v(" "),e("p",[t._v("一旦完成，你的config.plist应该是这样的:")]),t._v(" "),e("p",[e("img",{attrs:{src:v(483),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"禁用所有的日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禁用所有的日志"}},[t._v("#")]),t._v(" 禁用所有的日志")]),t._v(" "),e("p",[t._v("要删除所有文件日志和调试消息，只需将所有OpenCore文件替换为发布中的文件，就像我们之前在"),e("a",{attrs:{href:"#file-swap"}},[t._v("file swap")]),t._v("部分所做的那样。")]),t._v(" "),e("p",[t._v("最后，要删除写入磁盘的操作，设置如下:")]),t._v(" "),e("ul",[e("li",[t._v("AppleDebug = "),e("code",[t._v("NO")])]),t._v(" "),e("li",[t._v("ApplePanic = "),e("code",[t._v("NO")])]),t._v(" "),e("li",[t._v("Target = "),e("code",[t._v("0")])])])])}),[],!1,null,null,null);e.default=l.exports}}]);